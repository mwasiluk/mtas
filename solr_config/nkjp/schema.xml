<?xml version="1.0" encoding="UTF-8" ?>

<schema name="demo" version="1.6">

    <field name="_version_" type="long" indexed="true" multiValued="false" stored="false" docValues="true"/>
    <field name="id" type="string" indexed="true" stored="true" required="true" multiValued="false"/>
    <field name="type" type="text" required="true" multiValued="false" indexed="true" stored="true"/>
    <field name="title" type="text" required="false" multiValued="false" indexed="true" stored="true"/>
    <field name="book_title" type="text" required="false" multiValued="false" indexed="true" stored="true"/>
    <field name="series_title" type="text" required="false" multiValued="false" indexed="true" stored="true"/>
    <field name="title_sort" type="string" indexed="true" stored="false"/>
    <copyField source="title" dest="title_sort" />

    <field name="title_sort2" type="text_sort" indexed="true" stored="false"/>
    <copyField source="title" dest="title_sort2" />

    <field name="title_sub" type="text" required="false" multiValued="true" indexed="true" stored="true"/>
    <field name="lang" type="string" required="false" multiValued="false" indexed="true" stored="true"/>

    <field name="modernized_title" type="text" required="false" multiValued="false" indexed="true" stored="true"/>
    <field name="modernized_monogr_title" type="text" required="false" multiValued="false" indexed="true" stored="true"/>


    <field name="author" type="text" required="false" multiValued="false" indexed="true" stored="true"/>
    <field name="author_sort" type="string" indexed="true" stored="false"/>
    <copyField source="author" dest="author_sort" />

    <field name="modernized" type="boolean" required="false" multiValued="false" indexed="true" stored="true"/>

    <field name="volume" type="text" required="false" multiValued="false" indexed="true" stored="true"/>
    <field name="issue" type="text" required="false" multiValued="false" indexed="true" stored="true"/>
    <field name="page" type="text" required="false" multiValued="false" indexed="true" stored="true"/>
    <field name="text_origin" type="text" required="false" multiValued="false" indexed="true" stored="true"/>


    <field name="editor" type="text" required="false" multiValued="false" indexed="true" stored="true"/>
    <field name="modernized_editor" type="text" required="false" multiValued="false" indexed="true" stored="true"/>



    <field name="publisher" type="text" required="false" multiValued="false" indexed="true" stored="true"/>
    <field name="modernized_publisher" type="text" required="false" multiValued="false" indexed="true" stored="true"/>

    <field name="translator" type="text" required="false" multiValued="false" indexed="true" stored="true"/>
    <field name="modernized_translator" type="text" required="false" multiValued="false" indexed="true" stored="true"/>


    <field name="place" type="text" required="false" multiValued="false" indexed="true" stored="true"/>
    <field name="modernized_place" type="text" required="false" multiValued="false" indexed="true" stored="true"/>

    <field name="region" type="text" required="false" multiValued="false" indexed="true" stored="true"/>
    <field name="modernized_region" type="text" required="false" multiValued="false" indexed="true" stored="true"/>

    <field name="date" type="string" required="false" multiValued="false" indexed="true" stored="true"/>
    <field name="modernized_date" type="string" required="false" multiValued="false" indexed="true" stored="true"/>

    <field name="not_after" type="int" required="false" multiValued="false" indexed="true" stored="true"/>
    <field name="modernized_not_after" type="int" required="false" multiValued="false" indexed="true" stored="true"/>

    <field name="not_before" type="int" required="false" multiValued="false" indexed="true" stored="true"/>
    <field name="modernized_not_before" type="int" required="false" multiValued="false" indexed="true" stored="true"/>

    <field name="text" type="string_nd" required="false" multiValued="true" indexed="true" stored="true"/>
    <field name="genre" type="string_nd" required="false" multiValued="true" indexed="true" stored="true"/>
    <field name="kind" type="string_nd" required="false" multiValued="true" indexed="true" stored="true"/>
    <field name="subject" type="string_nd" required="false" multiValued="true" indexed="true" stored="true"/>
    <field name="ironic" type="string_nd" required="false" multiValued="true" indexed="true" stored="true"/>

    <field name="availability" type="text" required="false" multiValued="false" indexed="true" stored="true"/>

    <field name="link" type="string" required="false" multiValued="true" indexed="true" stored="true"/>

    <field name="text_data" type="mtas" required="false" multiValued="false" indexed="true" stored="true"/>
    <field name="error" type="string" indexed="true" stored="true"/>
    <field name="numberOfTokens" type="int" indexed="true" stored="true"/>
    <field name="numberOfPositions" type="int" indexed="true" stored="true"/>
    <field name="size" type="int" indexed="true" stored="true"/>

    <dynamicField name="*" type="ignored" multiValued="true" />

    <uniqueKey>id</uniqueKey>

    <fieldType name="ignored" indexed="false" stored="false" class="solr.StrField" />
    <fieldType name="string" class="solr.StrField" sortMissingLast="true" docValues="true"/>
    <fieldType name="string_nd" class="solr.StrField" sortMissingLast="true"/>
    <fieldType name="boolean" class="solr.BoolField"/>
    <fieldType name="int" class="solr.TrieIntField" precisionStep="8" positionIncrementGap="0"/>
    <fieldType name="long" class="solr.TrieLongField" precisionStep="0" positionIncrementGap="0"/>
    <fieldType name="text" class="solr.TextField" positionIncrementGap="100">
        <analyzer type="index">
            <tokenizer class="solr.StandardTokenizerFactory"/>
            <filter class="solr.LowerCaseFilterFactory"/>
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.StandardTokenizerFactory"/>
            <filter class="solr.LowerCaseFilterFactory"/>
        </analyzer>
    </fieldType>
    <fieldType name="text_sort" class="solr.TextField" positionIncrementGap="100">
        <analyzer type="index">
            <tokenizer class="solr.KeywordTokenizerFactory"/>
            <filter class="solr.LowerCaseFilterFactory"/>
        </analyzer>
        <analyzer type="query">
            <tokenizer class="solr.KeywordTokenizerFactory"/>
            <filter class="solr.LowerCaseFilterFactory"/>
        </analyzer>
    </fieldType>
    <fieldType name="mtas_config" class="solr.TextField" postingsFormat="MtasCodec">
        <analyzer type="index">
            <charFilter class="mtas.analysis.util.MtasCharFilterFactory" config="mtas.xml"/>
            <tokenizer class="mtas.analysis.util.MtasTokenizerFactory" config="mtas.xml"/>
        </analyzer>
    </fieldType>
    <fieldType name="mtas" class="mtas.solr.schema.MtasPreAnalyzedField"
               followIndexAnalyzer="mtas_config" defaultConfiguration="default"
               configurationFromField="type" setNumberOfTokens="numberOfTokens"
               setNumberOfPositions="numberOfPositions" setSize="size"
               setError="error" postingsFormat="MtasCodec">
        <analyzer type="query">
            <tokenizer class="solr.WhitespaceTokenizerFactory"/>
            <filter class="mtas.analysis.util.MtasPrefixTokenFilterFactory" prefix="t"/>
        </analyzer>
    </fieldType>

</schema>

